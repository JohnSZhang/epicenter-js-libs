var query=function(){return{toMatrixFormat:function(a){if(null===a||void 0===a||""===a)return";";if("string"==typeof a||a instanceof String)return a;var b=[],c=["<",">","!"];$.each(a,function(a,d){("string"!=typeof d||-1===$.inArray($.trim(d).charAt(0),c))&&(d="="+d),b.push(a+d)});var d=";"+b.join(";");return d},toQueryFormat:function(a){if(null===a||void 0===a)return"";if("string"==typeof a||a instanceof String)return a;var b=[];$.each(a,function(a,c){$.isArray(c)&&(c=c.join(",")),$.isPlainObject(c)&&(c=JSON.stringify(c)),b.push(a+"="+c)});var c=b.join("&");return c},qsToObject:function(a){if(null===a||void 0===a||""===a)return{};var b=a.split("&"),c={};return $.each(b,function(a,b){var d=b.split("=")[0],e=b.split("=")[1];-1!==e.indexOf(",")&&(e=e.split(",")),c[d]=e}),c},mergeQS:function(a,b){var c=this.qsToObject(this.toQueryFormat(a)),d=this.qsToObject(this.toQueryFormat(b));return $.extend(!0,{},c,d)}}}();window.F||(window.F={}),window.F.util||(window.F.util={}),F.util.query=query,function(){var a=this,b=function(){return{normalizeOperations:function(a,b){b||(b=[]);var c={ops:[],args:[]},d=function(a,b){return b||(b={ops:[],args:[]}),$.each(a,function(a,c){b.ops.push(a),b.args.push([].concat(c))}),b};return $.isPlainObject(a)?d(a,c):$.isArray(a)?$.each(a,function(a,e){$.isPlainObject(e)?e.name?(c.ops.push(e.name),c.args.push([].concat(e.params))):d(e,c):(c.ops.push(e),c.args.push([].concat(b[a])))}):(c.ops.push(a),c.args.push([].concat(b))),c}}}();"undefined"!=typeof exports?module.exports=b:(a.F||(a.F={}),a.F.util||(a.F.util={}),a.F.util.run=b)}.call(this),function(){var a=this,b=function(a){var b="https",c={"forio.com":"api.forio.com","foriodev.com":"api.epicenter.foriodev.com"},d=function(a){var b=["run","data"],c=this.protocol+"://"+this.host+"/"+a+"/";return-1!==$.inArray(a,b)&&(c+=this.accountPath+"/"+this.projectPath+"/"),c},e={protocol:b,api:"",host:function(){return host=window.location.host,host||(host="forio.com"),c[host]?c[host]:"api."+host}(),accountPath:function(){var a="test",b=window.location.pathname.split("/");return b&&"app"===b[1]&&(a=b[2]),a}(),projectPath:function(){var a="test",b=window.location.pathname.split("/");return b&&"app"===b[1]&&(a=b[3]),a}(),getAPIPath:d};return e.apiPath=d(e.api),$.extend(e,a),e};"undefined"!=typeof exports?module.exports=b:(a.F||(a.F={}),a.F.service||(a.F.service={}),a.F.service.URL=b)}.call(this),function(){var a,b=this,c=b.F;a="undefined"!=typeof require?require("service/urlService"):c.service.URL;var d=function(b){var c={logLevel:"NONE"},d=$.extend({},c,b);return d.server=a(d.server),{data:d,setEnv:function(){},get:function(a){return d[a]},set:function(a,b){d[a]=b}}};"undefined"!=typeof exports?module.exports=d:(b.F||(b.F={}),b.F.service||(b.F.service={}),b.F.service.Config=d)}.call(this),function(){var a=this,b=a.F,c=b.util.query,d=function(a){var b=function(a){return $.isFunction(a)?a():a},d={url:"",contentType:"application/json",headers:{},statusCode:{404:$.noop},parameterParser:c.toQueryFormat},e=$.extend({},d,a),f=function(a,c,d){c=b(c),c=$.isPlainObject(c)||$.isArray(c)?JSON.stringify(c):c;var f=$.extend(!0,{},e,d,{type:a,data:c}),g=["data","url"];if($.each(f,function(a,b){$.isFunction(b)&&-1!==$.inArray(a,g)&&(f[a]=b())}),f.logLevel&&"DEBUG"===f.logLevel){console.log(f.url);var h=f.success||$.noop;f.success=function(a){console.log(a),h.apply(this,arguments)}}return $.ajax(f)};return{basePath:"",statusHandlers:{},get:function(a,c){var d=$.extend({},e,c);return a=d.parameterParser(b(a)),f.call(this,"GET",a,d)},post:function(){return f.apply(this,["post"].concat([].slice.call(arguments)))},patch:function(){return f.apply(this,["patch"].concat([].slice.call(arguments)))},put:function(){return f.apply(this,["put"].concat([].slice.call(arguments)))},"delete":function(a,c){var d=$.extend({},e,c);if(a=d.parameterParser(b(a)),$.trim(a)){var g=-1===b(d.url).indexOf("?")?"?":"&";d.url=b(d.url)+g+a}return f.call(this,"DELETE",null,d)},head:function(){return f.apply(this,["head"].concat([].slice.call(arguments)))},options:function(){return f.apply(this,["options"].concat([].slice.call(arguments)))}}};"undefined"!=typeof exports?module.exports=d:(a.F||(a.F={}),a.F.transport||(a.F.transport={}),a.F.transport.Ajax=d)}.call(this),function(){var a,b=this,c=b.F,d=!1;a="undefined"!=typeof require?require(d?"transport/node-http-transport":"transport/ajax-http-transport"):c.transport.Ajax,"undefined"!=typeof exports?module.exports=HTTPService:(b.F||(b.F={}),b.F.transport||(b.F.transport={}),b.F.transport.HTTP=a)}.call(this),function(){var a,b,c,d,e=this,f=e.F;"undefined"!=typeof require?(a=require("jquery"),configService=require("util/configuration-service"),c=require("util/query-util")):(a=jQuery,b=f.service.Config,c=f.util.query,d=f.transport.HTTP);var g=function(b){var c={root:"/",token:"",apiKey:"",domain:"forio.com"},d=a.extend({},c,b),e=function(a,b){var c=[].slice.call(arguments),d=c.slice(2);a.resolve.apply(this,d),b&&b.success&&b.success.apply(this,d)},f={save:function(b,c,f){var g=a.Deferred(),h=d.domain,i=d.root;return document.cookie=encodeURIComponent(b)+"="+encodeURIComponent(c)+(h?"; domain="+h:"")+(i?"; path="+i:""),e.call(this,g,f,c),g.promise()},load:function(b,c){var d=a.Deferred(),f=new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(b).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),g=document.cookie.replace(f,"$1");return g=decodeURIComponent(g)||null,e.call(this,d,c,g),d.promise()},remove:function(b,c){var f=a.Deferred(),g=d.domain,h=d.root;return document.cookie=encodeURIComponent(b)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(g?"; domain="+g:"")+(h?"; path="+h:""),e.call(this,f,c,b),f.promise()},destroy:function(b){for(var c=a.Deferred(),d=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),f=[],g=0;g<d.length;g++){var h=decodeURIComponent(d[g]),i=this.remove(h);f.push(i)}var j=this;return a.when.apply(null,f).done(function(){e.apply(j,[c,b].concat([].slice.call(arguments)))}),c.promise()}};return f};"undefined"!=typeof exports?module.exports=g:(e.F||(e.F={}),e.F.service||(e.F.service={}),e.F.service.Cookie=g)}.call(this),function(){var a,b,c,d,e=this,f=e.F;"undefined"!=typeof require?(a=require("jquery"),configService=require("util/configuration-service"),c=require("util/query-util")):(a=jQuery,b=f.service.Config,c=f.util.query,d=f.transport.HTTP);var g=function(c){var e={root:"/",token:"",apiKey:"",domain:"forio.com"},f=a.extend({},e,c),g=b(f).get("server");f.account&&(g.accountPath=f.account),f.project&&(g.projectPath=f.project);var h=function(a){var b=g.getAPIPath("data")+f.root+"/";return a&&(b+=a+"/"),b},i={url:h};f.token&&(i.headers={Authorization:"Bearer "+f.token});var j=d(i),k={query:function(b,c,d,e){var g=a.extend(!0,{q:c},d),i=a.extend(!0,{},f,e,{url:h(b)});return j.get(g,i)},save:function(b,c,d){var e;"object"==typeof b?(e=b,d=c):(e={})[b]=c;var g=a.extend(!0,{},f,d);return j.post(e,g)},saveAs:function(b,c,d){var e=a.extend(!0,{},f,d,{url:h(b)});return j.put(c,e)},load:function(b,c,d){var e=a.extend(!0,{},f,d,{url:h(b)});return j.get(c,e)},remove:function(b,c){var d,e=a.extend(!0,{},f,c);return a.isArray(b)?d={id:b}:(d="",e.url=h(b)),j.delete(d,e)}};a.extend(this,k)};"undefined"!=typeof exports?module.exports=g:(e.F||(e.F={}),e.F.service||(e.F.service={}),e.F.service.Data=g)}.call(this),function(){var a,b=this,c=b.F,d=!1;a="undefined"!=typeof require?require(d?"./session-persistence-service.js":"./cookie-persistence-service.js"):c.service.Cookie,"undefined"!=typeof exports?module.exports=HTTPService:(b.F||(b.F={}),b.F.service||(b.F.service={}),b.F.service.Persistence=a)}.call(this),function(){var a,b,c,d,e,f=this,g=f.F;"undefined"!=typeof require?(a=require("jquery"),configService=require("util/configuration-service"),c=require("util/query-util"),e=require("persistence/persistence-service-factory")):(a=jQuery,b=g.service.Config,c=g.util.query,d=g.transport.HTTP,e=g.service.Persistence);var h=function(c){var g,h,i,j={store:"session"},k=a.extend({},j,c),l=b(k).get("server"),m=d({url:l.getAPIPath("authentication")}),n=new e(k.store),o="epicenter.token";n.load(o).then(function(a){a&&(g=a)});var p={store:n,login:function(b,c,d){var e=a.extend(!0,{success:a.noop},k,d),f=e.success||a.noop;return e.success=function(a){i=c,h=b,g=a.access_token,n.save(o,g),f.apply(this,arguments)},m.post({userName:b,password:c},e)},logout:function(a,b){return n.remove(o,b)},getToken:function(b){var c=a.extend(!0,{success:a.noop},k,b),d=a.Deferred();return g?d.resolve(g):this.login(h,i,c).then(function(){a.resolve(g)}),d.promise()},getUserInfo:function(b){var c=b?b:g,d=a.Deferred();return d.resolve(f.atob(c)),d.promise()}};a.extend(this,p)};"undefined"!=typeof exports?module.exports=h:(f.F||(f.F={}),f.F.service||(f.F.service={}),f.F.service.Auth=h)}.call(this),function(){var a,b,c,d,e,f,g=this,h=g.F;"undefined"!=typeof require?(a=require("jquery"),configService=require("utils/configuration-service"),c=require("util/query-util"),d=require("util/run-util"),e=require("util/promisify-util")):(a=jQuery,b=h.service.Config,c=h.util.query,d=h.util.run,e=h.util,f=h.transport.HTTP);var i=function(c){var d={runService:null},e=a.extend({},d,c),g=(b(e).get("url"),function(){return e.runService.urlConfig.getFilterURL()+"variables/"}),h=f(a.extend(!0,c,{url:g})),i={load:function(b,c,d){var f=a.extend(!0,{},e,d);return h.get(c,a.extend({},f,{url:g()+b+"/"}))},query:function(b,c,d){var f=a.extend(!0,{},e,d);return a.isArray(b)&&(b={include:b}),a.extend(b,c),h.get(b,f)},save:function(b,c,d){var f;"object"==typeof b?(f=b,d=c):(f={})[b]=c;var g=a.extend(!0,{},e,d);return h.patch.call(this,f,g)}};a.extend(this,i)};"undefined"!=typeof exports?module.exports=i:(g.F||(g.F={}),g.F.service||(g.F.service={}),g.F.service.Variables=i)}.call(this),function(){var a,b,c,d,e,f,g,h=this,i=h.F;"undefined"!=typeof require?(a=require("jquery"),configService=require("util/configuration-service"),g=require("service/variables-api-service"),c=require("util/query-util"),d=require("util/run-util"),e=require("util/promisify-util")):(a=jQuery,b=i.service.Config,g=i.service.Variables,c=i.util.query,d=i.util.run,e=i.util,f=i.transport.HTTP);var j=function(e){var h={token:"",account:"",project:"",filter:"",success:a.noop,error:a.noop,complete:a.noop,progress:a.noop},i=a.extend({},h,e),j=b(i).get("server");i.account&&(j.accountPath=i.account),i.project&&(j.projectPath=i.project),j.filter=";",j.getFilterURL=function(){var a=j.getAPIPath("run"),b=c.toMatrixFormat(i.filter);return b&&(a+=b+"/"),a};var k={url:j.getFilterURL};i.token&&(k.headers={Authorization:"Bearer "+i.token});var l=f(k),m=function(a){if(a.filter&&(i.filter=a.filter),!i.filter)throw new Error("No filter specified to apply operations against")},n={urlConfig:j,create:function(b,c){var d=a.extend(!0,{},i,c,{url:j.getAPIPath("run")});"string"==typeof b&&(b={model:b});var e=d.success;return d.success=function(a){return i.filter=a.id,e.apply(this,arguments)},l.post(b,d)},query:function(b,c,d){i.filter=b;var e=a.extend(!0,{},i,d);return l.get(c,e)},filter:function(b,c,d){a.isPlainObject(i.filter)?a.extend(i.filter,b):i.filter=b;var e=a.extend(!0,{},i,d);return l.get(c,e)},load:function(b,c,d){i.filter=b;var e=a.extend(!0,{},i,d);return l.get(c,e)},save:function(b,c){var d=a.extend(!0,{},i,c);return m(d),l.patch(b,d)},"do":function(b,c,e){var f,g;e?(f=c,g=e):a.isPlainObject(c)?(f=null,g=c):f=c;var h=d.normalizeOperations(b,f),k=a.extend(!0,{},i,g);m(k);var n=h.args[0].length?{arguments:h.args[0]}:void 0;return l.post(n,a.extend(!0,{},k,{url:j.getFilterURL()+"operations/"+h.ops[0]+"/"}))},serial:function(b,c,e){var f=d.normalizeOperations(b,c),g=f.ops,h=f.args,j=this,k=a.Deferred(),l=a.extend(!0,{},i,e),m=function(){var a=g.shift(),b=h.shift();j.do(a,b,{success:function(){g.length?m():(k.resolve.apply(this,arguments),l.success.apply(this,arguments))},error:function(){k.reject.apply(this,arguments),l.error.apply(this,arguments)}})};return m(),k.promise()},parallel:function(b,c,e){for(var f=a.Deferred(),g=d.normalizeOperations(b,c),h=g.ops,j=g.args,k=a.extend(!0,{},i,e),l=[],m=0;m<h.length;m++)l.push(this.do(h[m],j[m]));return a.when.apply(this,l).done(function(){f.resolve.apply(this,arguments),k.success.apply(this.arguments)}).fail(function(){f.reject.apply(this,arguments),k.error.apply(this.arguments)}),f.promise()}},o={variables:function(b){var c=new g(a.extend({},i,b,{runService:this}));return c}};a.extend(this,n),a.extend(this,o)};"undefined"!=typeof exports?module.exports=j:(h.F||(h.F={}),h.F.service||(h.F.service={}),h.F.service.Run=j)}.call(this);
//# sourceMappingURL=epicenter.min.js.map